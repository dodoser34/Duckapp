<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="../html/assets/icon.ico" type="image/x-icon">
    <title data-i18n="title">DuckApp Chat</title>

    <!-- Styles -->
    <link rel="stylesheet" href="../styles/base/chat.css">
    <link rel="stylesheet" href="../styles/chat_styles/header.css">
    <link rel="stylesheet" href="../styles/chat_styles/input.css">
    <link rel="stylesheet" href="../styles/chat_styles/friends.css">
    <link rel="stylesheet" href="../styles/chat_styles/profile.css">
    <link rel="stylesheet" href="../styles/chat_styles/messages.css">
    <link rel="stylesheet" href="../styles/chat_styles/responsive.css">
    <script src="../js/modals-close.js"></script>


    <!-- Scripts -->
    <script type="module" src="../js/checkSession.js" defer></script>
    <script type="module" src="../js/chat/chat_header.js" defer></script>
    <script type="module" src="../js/chat/addFriend.js" defer></script>
    <script type="module" src="../js/chat/changeStats.js" defer></script>
    <script type="module" src="../js/chat/profile.js" defer></script>
    <script type="module" src="../js/chat/logoutProfile.js" defer></script>
    <script type="module" src="../js/chat/chat_logic.js" defer></script>

    <script type="module" src="../js/translatePage.js" defer></script>

</head>
<body data-page="main_chat">
    <div id="ducks"></div>

    <div class="chat-wrapper">
        <!-- Chat Box -->
        <div class="chat-box">
            <!-- Header -->
            <div class="chat-header">
                <div class="chat-header-left">
                    <!-- <img class="avatar" id="header-avatar"> -->
                    <div class="chat-header-text">
                        <div id="chat-title" class="chat-title"></div>
                        <div class="chat-subtitle"></div>
                    </div>
                </div>
                <div class="chat-header-actions">
                    <button class="header-icon-btn" id="menu-toggle">â‹®</button>
                    <div class="chat-menu" id="chat-menu">
                        <button class="menu-item" id="rename-chat" data-i18n="header_button_rename">ğŸ“ Rename</button>
                        <button class="menu-item" id="delete-chat" data-i18n="header_button_delete_chat">ğŸ—¨ï¸ Delete Chat</button>
                        <button class="menu-item" id="delete-friend" data-i18n="header_button_delete_friend">ğŸ—‘ï¸ Delete Friend</button>
                    </div>
                </div>
            </div>

            <!-- Messages -->
            <div class="chat-messages" id="chat-body">
                <div class="empty-chat muted">Select a chat on the right ğŸ‘‰</div>
            </div>

            <!-- Input Area -->
            <div class="chat-input">
                <textarea id="message-input" placeholder="Write a message..." rows="1" maxlength="3000"></textarea>

                <!-- GIF Button & Panel -->
                <div class="gif-wrapper">
                    <button id="sendgif-btn">GIF</button>
                    <div class="gif-inline-panel" id="gif-panel">
                        <div class="gif-search-bar">
                            <input type="text" id="gifSearchInput" placeholder="Search GIF...">
                            <button id="gifSearchBtn">ğŸ”</button>
                            <button class="gif-close-btn" id="gifCloseBtn">âœ–</button>
                        </div>
                        <div id="gif-results" class="gif-results"></div>
                    </div>
                </div>

                <!-- Emoji Button & Panel -->
                <div class="emoji-wrapper">
                    <button id="sendsmile-btn">ğŸ˜„</button>
                    <div class="emoji-panel" id="emoji-panel">
                        <span class="close" id="emojiCloseBtn">âœ–</span>
                        <div class="emoji-category">Smiles</div>
                        <div class="emoji-scroll">
                            <div class="emoji-grid">
                                ğŸ¦† ğŸ˜€ ğŸ˜ƒ ğŸ˜„ ğŸ˜ ğŸ˜† ğŸ˜… ğŸ˜‚ ğŸ¤£ ğŸ˜Š ğŸ˜‡ ğŸ™‚ ğŸ™ƒ ğŸ˜‰ ğŸ˜Œ ğŸ˜ ğŸ¥° ğŸ˜˜ ğŸ˜— ğŸ˜™ ğŸ˜š ğŸ˜‹ ğŸ˜› ğŸ˜ ğŸ˜œ ğŸ¤ª ğŸ¤¨ ğŸ§ ğŸ¤“ ğŸ˜ ğŸ¥³ ğŸ˜ ğŸ˜’ ğŸ˜ ğŸ˜” ğŸ˜Ÿ ğŸ˜• ğŸ™ â˜¹ï¸ ğŸ˜£ ğŸ˜– ğŸ˜« ğŸ˜© ğŸ¥º ğŸ˜¢ ğŸ˜­ ğŸ˜¤ ğŸ˜  ğŸ˜¡ ğŸ¤¬ ğŸ¤¯ ğŸ˜³ ğŸ¥µ ğŸ¥¶ ğŸ˜± ğŸ˜¨ ğŸ˜° ğŸ˜¥ ğŸ˜“ ğŸ¤— ğŸ¤” ğŸ¤­ ğŸ¤« ğŸ¤¥ ğŸ˜¶ ğŸ˜ ğŸ˜‘ ğŸ˜¬ ğŸ™„ ğŸ˜¯ ğŸ˜¦ ğŸ˜§ ğŸ˜® ğŸ˜² ğŸ¥± ğŸ˜´ ğŸ¤¤ ğŸ˜ª ğŸ˜µ ğŸ¤ ğŸ¥´ ğŸ¤¢ ğŸ¤® ğŸ¤§ ğŸ˜· ğŸ¤’ ğŸ¤• ğŸ¤‘ ğŸ¤  ğŸ˜ˆ ğŸ‘¿ ğŸ‘¹ ğŸ‘º ğŸ¤¡ ğŸ’© ğŸ‘» ğŸ’€ â˜ ï¸ ğŸ‘½ ğŸ‘¾ ğŸ¤– ğŸƒ
                            </div>
                        </div>
                    </div>
                </div>

                <button id="send-btn">ğŸ¦†</button>
            </div>
        </div>

        <!-- Chat List / Sidebar -->
        <aside class="chat-list">
            <!-- Profile -->
            <div class="chat-list-item profile" id="profile-toggle">
                <div class="avatar-wrapper">
                    <img class="avatar" id="profile-avatar">
                    <span class="status-indicator" id="status-indicator"></span>
                </div>
                <div>
                    <div class="name" id="profile-name"></div>
                    <div class="status muted" id="profile-status"></div>
                </div>
            </div>

            <div id="profile-panel" class="profile-panel">
                <button class="sub-btn toggle-status" data-i18n="profile_btn_change_status"></button>
                <div class="sub-panel" id="status-panel">
                    <button class="status-btn" data-status="online" data-i18n="profile_btn_change_status_online">ğŸŸ¢ Online</button>
                    <button class="status-btn" data-status="invisible" data-i18n="profile_btn_change_status_invisible">ğŸ‘» Invisible</button>
                    <button class="status-btn" data-status="dnd" data-i18n="profile_btn_change_status_dnd">â›” Do Not Disturb</button>
                </div>
                <button class="sub-btn" id="open-avatar-modal" data-i18n="profile_btn_change_avatar"></button>
                <button class="sub-btn logout-btn" id="logout-btn" data-i18n="profile_btn_logout"></button>
            </div>

            <!-- Friends Panel -->
            <div class="friends-panel-wrapper">
                <div id="profile-panel-friends" class="profile-panel-friends">
                    <button id="profile-add-friend-btn" data-i18n="btn_add_friend"></button>
                </div>
                <div class="chat-list-items"></div>
            </div>

            <footer class="footer" data-i18n="footer"></footer>
        </aside>
    </div>

    <!--! ĞœĞ¾Ğ´Ğ°Ğ»ĞºĞ° Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ° Ğ¸ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ğ´Ñ€ÑƒĞ·ĞµĞ¹ -->
    <div id="add-friend-modal" class="modal">
        <div class="add-friend-content">
            <span class="close">&times;</span>
            <h2 data-i18n="btn_add_friend_modal_title"></h2>
            <input type="text" id="friend-search" placeholder="Enter friend's nickname" maxlength="18" required/>
            <div class="add-friend-buttons">
                <button id="search-friend-btn" data-i18n="btn_add_friend_modal_search_button"></button>
            </div>
            <div id="friend-result"></div>
            <div id="error-message"></div>
        </div>
    </div>

    <!--! ĞœĞ¾Ğ´Ğ°Ğ»ĞºĞ° Ğ´Ğ»Ñ Ğ¿ĞµÑ€ĞµĞ¸Ğ¼ĞµĞ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ñ‡Ğ°Ñ‚Ğ° -->
    <div id="rename-modal" class="modal rename-modal">
        <div class="modal-content rename-content">
            <h3 data-i18n="header_menu_renameBtn_modal_title"></h3>
            <input type="text" id="rename-input" placeholder="New name" maxlength="18"/>
            <div class="modal-buttons">
                <button id="rename-confirm" data-i18n="header_menu_renameBtn_modal_saveBtn"></button>
                <button id="rename-cancel" data-i18n="header_menu_renameBtn_modal_cancelBtn"></button>
            </div>
        </div>
    </div>

    <!--! ĞœĞ¾Ğ´Ğ°Ğ»ĞºĞ° Ñ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸ĞµĞ¼ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ñ Ñ‡Ğ°Ñ‚Ğ° -->
    <div class="delete-modal" id="delete-modal">
        <div class="delete-content">
            <h3 data-i18n="header_menu_deleteChatBtn_modal_title"></h3>
            <p data-i18n="header_menu_deleteChatBtn_modal_text"></p>
            <div class="modal-buttons">
                <button id="delete-confirm" data-i18n="header_menu_deleteChatBtn_modal_deleteBtn"></button>
                <button id="delete-cancel" class="danger" data-i18n="header_menu_deleteChatBtn_modal_cancelBtn"></button>
            </div>
        </div>
    </div>

    <!--! ĞœĞ¾Ğ´Ğ°Ğ»ĞºĞ° Ñ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸ĞµĞ¼ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ñ Ğ´Ñ€ÑƒĞ³Ğ° -->
    <div class="delete-friend-modal" id="delete-friend-modal">
        <div class="delete-friend-content">
            <h3 data-i18n="header_menu_deleteFriendBtn_modal_title"></h3>
            <p data-i18n="header_menu_deleteFriendBtn_modal_text"></p>
            <div class="modal-buttons">
                <button id="delete-friend-confirm" data-i18n="header_menu_deleteFriendBtn_modal_deleteBtn"></button>
                <button id="delete-friend-cancel" class="danger" data-i18n="header_menu_deleteFriendBtn_modal_cancelBtn"></button>
            </div>
        </div>
    </div>

    <!--! ĞœĞ¾Ğ´Ğ°Ğ»ĞºĞ° Ğ´Ğ»Ñ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° Ğ¸ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ¸ Ğ°Ğ²Ğ°Ñ‚Ğ°Ñ€ĞºĞ¸ -->
    <div class="modal" id="avatar-modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 data-i18n="profile_btn_change_avatar_title"></h2>
            <div class="avatar-options">
                <img src="../html/assets/avatar_1.png" class="avatar-choice">
                <img src="../html/assets/avatar_2.png" class="avatar-choice">
                <img src="../html/assets/avatar_3.png" class="avatar-choice">
                <img src="../html/assets/avatar_4.png" class="avatar-choice">
                <img src="../html/assets/avatar_5.png" class="avatar-choice">
                <img src="../html/assets/avatar_6.png" class="avatar-choice">
                <img src="../html/assets/avatar_7.png" class="avatar-choice">
                <img src="../html/assets/avatar_8.png" class="avatar-choice">
                <img src="../html/assets/avatar_9.png" class="avatar-choice">
                <img src="../html/assets/avatar_10.png" class="avatar-choice">
            </div>
            <label class="upload-btn" data-i18n="profile_btn_change_avatar_btn_upload_avatar">
            <input type="file" id="avatar-input" accept="image/*">
            </label>
        </div>
    </div>
</body>
</html>
